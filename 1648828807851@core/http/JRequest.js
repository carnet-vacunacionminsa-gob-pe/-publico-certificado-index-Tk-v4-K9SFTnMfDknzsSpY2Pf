import{JConst}from"../config/JConst.js";import{Module}from"../core/module.js";import{Component}from"../../1648828807851@core/component.js";const JRequest=function(){"use strict";function e(){}function t(e){return new Promise(((t,n)=>{const o=new XMLHttpRequest;let r;for(r in o.open(e.tipoMetodo,e.url,!0),e.header)o.setRequestHeader(e.header[r].key,e.header[r].value);o.onreadystatechange=function(r){4===o.readyState&&(200===o.status?"json"===e.typeResponse?t(JSON.parse(o.responseText)):t(o.responseText):n(o))},e.data&&""!==e.data?o.send(e.data):o.send(null),o.onerror=function(){n(Error("Network Error"))}}))}return e.Get=function(e,n,o=[]){return t({tipoMetodo:"get",typeResponse:n||"json",url:e,header:o})},e.Post=function(e,n,o,r,s=[]){var i,u,l=r||"json",a=o||"json",c=s;if("json"===a)c.push({key:"Content-Type",value:"application/json; charset=utf-8"}),i=JSON.stringify(n);else if("form"===a)for(u in i=new FormData,n)i.append(u,n[u]);return t({tipoMetodo:"post",data:i,typeResponse:l,url:e,header:c})},e.toRoute=function(e,t=!1){window.history.pushState(null,null,JConst.UrlBase("#"+e));let n=e.split("?");return Module.importComponentInstance(n[0],null,t)},e.loadCss=function(e){let t,n,o,r=e,s=document.getElementsByTagName("head")[0],i=(new Date,[]);for(t in r)n=r[t],document.getElementById("css_"+n.id)||i.push(new Promise((function(e,t){o=document.createElement("link"),o.id="css_"+n.id,o.rel="stylesheet",o.type="text/css",o.onload=function(){e()},o.href=n.url,o.async=!0,s.appendChild(o)})));return Promise.all(i)},e.loadJs=function(e){let t,n,o,r=e,s=[];for(t in r)n=r[t],document.querySelector("head #js_"+n.id)||s.push(new Promise((function(e,t){o=document.createElement("script"),o.id="js_"+n.id,o.src=n.url,o.onload=function(){e()},n.async?o.setAttribute("async",!0):o.async=!1,n.defer&&o.setAttribute("defer",!0),document.head.appendChild(o)})));return Promise.all(s)},e.isPublic=function(){let e=document.location.hash;e.toLowerCase().indexOf(JConst.UrlFolder().toLowerCase())>-1&&(e=e.replace(JConst.UrlFolder().toLowerCase(),JConst.UrlFolder()),e=e.replace(JConst.UrlFolder().toUpperCase(),JConst.UrlFolder()));const t=e.split(JConst.UrlBase());if("#publico/"===t[0].substr(0,9)){return t[0].split("?")[0].slice(1)}return""},e}(),JParameter=function(){"use strict";let e=null;function t(){}return t.fromQuery=function(t,n=null,o=!1){if(!0===o&&(e=null),null===e){const t=window.location.hash.split("?");e=new URLSearchParams("?"+t[1])}const r=e.get(t);return null===r?n:r},t}(),JCookie=function(){function e(){}return e.set=function(e,t,n=365){const o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);const r="expires="+o.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"},e.get=function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},e}();export{JParameter,JRequest,JCookie};